<?xml version='1.0' encoding='UTF-8'?>
<document>
  <properties>
    <title>Setting up replication</title>
    <author>Shinsuke Sugaya</author>
  </properties>
  <body>
    <section name='About replication settings'>
      <p>Sets the replication of the index Solr replication features. You can distribute load during indexing to build two in Fess of the crawl and index creation and search for Fess servers.</p>
    </section>
    <section name='How to build a'>
      <subsection name='Building indexes for Fess'>
        <p>Fess, download and install the. When you install MasterServer named host.<code>/ /opt/fess_master</code> To assume you installed. Edit the SOLR/core1/conf/solrconfig.XML like the following.</p>
<source><![CDATA[
...
<requestHandler name="/replication" >
    <lst name="master">
        <str name="replicateAfter">startup</str>
        <str name="replicateAfter">optimize</str>
        <str name="backupAfter">optimize</str>
        <str name="confFiles">schema.xml,stopwords.txt,stopwords_ja.txt,elevate.xml,
            stoptags_ja.txt,synonyms.txt,mapping_ja.txt,mapping-FoldToASCII.txt,
            mapping-ISOLatin1Accent.txt,protwords.txt,compositePOS.txt,spellings.txt,
            currency.xml</str>
    </lst>
    <str name="maxNumberOfBackups">1</str>
</requestHandler>
...
]]></source>
        <p>Register the crawl settings as well as Fess starts after the normal construction. Steps to building the index for Fess remains especially as normal building procedures.</p>
      </subsection>
      <subsection name='Search for Fess building'>
        <p>Fess, download and install the.<code>/ /opt/fess_slave</code> To assume you installed. Edit the SOLR/core1/conf/solrconfig.XML like the following.</p>
<source><![CDATA[
...
<requestHandler name="/replication" >
    <lst name="slave">
        <str name="masterUrl">http://MasterServer:8080/solr/core1/replication</str>
        <str name="pollInterval">00:00:60</str>
        <str name="compression">internal</str>
        <str name="httpConnTimeout">5000</str>
        <str name="httpReadTimeout">10000</str>
        <str name="httpBasicAuthUser">solradmin</str>
        <str name="httpBasicAuthPassword">solradmin</str>
     </lst>
</requestHandler>
...
]]></source>
        <p>Start the Fess.</p>
      </subsection>
      <subsection name='Index of synchronization'>
        <p>Until the above settings copied to search for Fess index crawl after the optimization (optimize) the index for Fess.</p>
      </subsection>
    </section>
  </body>
</document>
